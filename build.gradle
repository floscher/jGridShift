apply plugin: 'java'
apply plugin: 'eclipse'

version = '2.0.0-josm'
sourceCompatibility = '1.7'

eclipse {
  classpath {
    downloadSources=true
    downloadJavadoc=true
  }
}

repositories {
  mavenCentral()
}

dependencies {
  testCompile 'junit:junit:4.12'
}

task mainZip(type: Zip) {
  doFirst {
    jar.manifest.attributes 'Implementation-Title': project.name, 'Implementation-Version': version
    jar.manifest.writeTo("$buildDir/tmp/mainZip/META-INF/MANIFEST.MF")
  }

  manifest {
    attributes 'Implementation-Title': project.name,
      'Implementation-Version': version
  }
  baseName = project.name
  from sourceSets.main.output
  from "$buildDir/tmp/mainZip"
}
assemble.dependsOn mainZip

task apiJar(type: Jar) {
  manifest {
    attributes 'Implementation-Title': project.name,
      'Implementation-Version': version
  }
  baseName = project.name + '-api'
  from sourceSets.main.output
}
jar.dependsOn apiJar

task wrapper(type: Wrapper) {
  gradleVersion = '2.3'
}
